# เอกสารโค้ด: login.js

## 1. ชื่อไฟล์
**login.js**

## 2. ภาพรวม
ไฟล์นี้จัดการฟังก์ชันการเข้าสู่ระบบ (Login) สำหรับผู้ใช้ที่มีอยู่ในระบบ  
ระบบจะตรวจสอบข้อมูลที่ผู้ใช้กรอกในฟอร์ม (Username และ Password) โดยการดึงข้อมูลจาก UserDB ผ่าน IndexedDB  
หากตรวจสอบข้อมูลถูกต้อง ระบบจะแสดงข้อความยืนยันและเก็บข้อมูลผู้ใช้ที่ล็อกอินใน sessionStorage จากนั้นเปลี่ยนเส้นทางไปยังหน้าที่เหมาะสมตาม role ของผู้ใช้

## 3. รายละเอียดฟังก์ชันและการทำงาน
- **เปิดฐานข้อมูล (openDB):**  
  - ฟังก์ชัน `openDB()` ใช้สำหรับเปิดฐานข้อมูล "UserDB" โดยสร้าง object store "users" หากยังไม่มี และตั้งค่า index สำหรับ `username`

- **ตรวจสอบข้อมูลเข้าสู่ระบบ:**  
  - เมื่อผู้ใช้กรอกข้อมูลในฟอร์มและส่งข้อมูล ระบบจะตรวจสอบว่าแบบฟอร์มอยู่ในโหมด Login (โดยดูจากการซ่อนฟิลด์ยืนยันรหัสผ่าน)
  - ใช้ index `username` ใน UserDB เพื่อตรวจสอบว่ามีผู้ใช้นั้นหรือไม่
  - ตรวจสอบว่ารหัสผ่านที่กรอกตรงกับข้อมูลในฐานข้อมูลหรือไม่

- **การเข้าสู่ระบบสำเร็จ:**  
  - หากข้อมูลถูกต้อง ระบบจะแจ้งว่าเข้าสู่ระบบสำเร็จ  
  - บันทึกข้อมูลผู้ใช้ (userID, username, role) ลงใน sessionStorage  
  - เปลี่ยนเส้นทางไปยังหน้าสำหรับผู้ดูแล (admin) หรือหน้าการจอง (booking) ตาม role ของผู้ใช้

## 4. วิธีการใช้งาน
- ผู้ใช้กรอกข้อมูล Username และ Password ในฟอร์มเข้าสู่ระบบ  
- เมื่อกด submit แบบฟอร์ม ระบบจะตรวจสอบข้อมูลใน UserDB และดำเนินการเข้าสู่ระบบ  
- หากข้อมูลถูกต้อง ผู้ใช้จะถูกนำทางไปยังหน้าที่เหมาะสม

## 5. ข้อสังเกต
- ควรตรวจสอบความถูกต้องของข้อมูลที่กรอกก่อนส่งข้อมูลเข้าสู่ระบบ  
- การใช้ IndexedDB และการค้นหาด้วย index ช่วยให้การตรวจสอบข้อมูลเป็นไปอย่างมีประสิทธิภาพ  
- ควรมีการจัดการ error เมื่อไม่สามารถดึงข้อมูลหรือข้อมูลไม่ถูกต้อง เพื่อให้ผู้ใช้ทราบถึงปัญหา
