# เอกสารโค้ด: payment.js

## 1. ชื่อไฟล์
**payment.js**

## 2. ภาพรวม
ไฟล์นี้จัดการหน้าชำระเงิน (Payment) สำหรับการจองตั๋ว  
ระบบจะดึงข้อมูลการจองจาก sessionStorage ตรวจสอบข้อมูลที่จำเป็น จากนั้นคำนวณ VAT (7%) และยอดรวมสุดท้าย พร้อมแสดงรายละเอียดการจองบนหน้าเว็บ  
ผู้ใช้สามารถยกเลิกการจองหรือยืนยันการชำระเงินได้

## 3. รายละเอียดฟังก์ชันและการทำงาน
- **ดึงข้อมูลการจอง:**  
  - ดึงค่า `routeID`, `selectSeatSS` (อาร์เรย์ที่เลือกที่นั่ง) และ `totalPrice` จาก sessionStorage  
  - หากไม่มีข้อมูลที่จำเป็น ระบบจะเปลี่ยนเส้นทางกลับไปยังหน้าการเลือกที่นั่ง

- **คำนวณ VAT และยอดรวม:**  
  - คำนวณ VAT 7% จาก subtotal  
  - คำนวณยอดรวมสุดท้ายโดยบวก VAT กับ subtotal

- **แสดงรายละเอียดการจอง:**  
  - แสดงข้อมูลเช่น Route ID, รายชื่อที่นั่งที่เลือก, ราคา subtotal, VAT และยอดรวมสุดท้ายในหน้าเว็บ

- **การจัดการปุ่ม:**  
  - ปุ่มยกเลิก (Cancel) เปลี่ยนเส้นทางกลับไปยังหน้าการเลือกที่นั่ง  
  - ปุ่มยืนยัน (Confirm) ทำการบันทึกข้อมูลตั๋วใหม่ลงใน TicketDB ผ่าน IndexedDB และเปลี่ยนเส้นทางไปยังหน้าประวัติการซื้อ

## 4. วิธีการใช้งาน
- เมื่อผู้ใช้เข้าสู่หน้าชำระเงิน ระบบจะโหลดข้อมูลการจองที่ถูกบันทึกไว้ใน sessionStorage  
- ผู้ใช้สามารถตรวจสอบรายละเอียดการจอง และคลิกปุ่ม Confirm เพื่อดำเนินการชำระเงิน  
- หลังจากบันทึกข้อมูลตั๋วสำเร็จ ระบบจะทำการล้างข้อมูลการจองและเปลี่ยนเส้นทางไปยังหน้าประวัติการซื้อ

## 5. ข้อสังเกต
- ควรตรวจสอบความถูกต้องของข้อมูลการจองก่อนดำเนินการชำระเงิน  
- การคำนวณ VAT และยอดรวมสุดท้ายต้องถูกต้องเพื่อให้ผู้ใช้ได้รับข้อมูลที่ถูกต้องในการชำระเงิน
