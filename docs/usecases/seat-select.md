# เอกสารโค้ด: seat-select.js

## 1. ชื่อไฟล์
**seat-select.js**

## 2. ภาพรวม
ไฟล์นี้เป็นส่วนของการเลือกที่นั่ง (Seat Selection) สำหรับการจองตั๋ว  
จัดการการเลือกที่นั่งโดยใช้ sessionStorage เพื่อเก็บข้อมูลที่นั่งที่ผู้ใช้เลือกและยอดรวมราคา  
ยังรองรับการแสดงข้อมูลเส้นทางที่เลือกและการอัปเดตราคาโดยการดึงข้อมูลราคาจาก SeatClassDB ผ่าน IndexedDB

## 3. รายละเอียดฟังก์ชันและการทำงาน
- **การเตรียมข้อมูลใน sessionStorage:**  
  - ตรวจสอบและกำหนดค่าเริ่มต้นให้กับ `selectSeatSS` (เป็นอาร์เรย์) และ `totalPrice` หากยังไม่มี

- **ตรวจสอบการเลือกเส้นทาง:**  
  - ตรวจสอบว่ามีการเลือกเส้นทางหรือไม่ (ผ่านค่า `userSelectRouteID` ใน sessionStorage)  
  - หากไม่มีข้อมูลเส้นทาง ระบบจะเปลี่ยนเส้นทางไปยังหน้าการจอง

- **โหลดข้อมูลเส้นทาง:**  
  - ดึงข้อมูลเส้นทางจาก RouteDB และแสดงผลข้อมูลการเดินทางในส่วน header

- **การจัดการที่นั่ง:**  
  - ผูก event listener ให้กับปุ่มที่เป็นที่นั่ง (`.seat`) เพื่อสลับสถานะการเลือก  
  - ฟังก์ชัน `toggleSeatSelection` จะเพิ่มหรือลบที่นั่งที่เลือกจาก sessionStorage พร้อมอัปเดตคลาสของปุ่ม
  - ดึงราคาที่นั่งจาก SeatClassDB ผ่านฟังก์ชัน `getSeatPrice`  
  - ฟังก์ชัน `renderSelectedSeats` จะแสดงรายชื่อที่นั่งที่เลือกและคำนวณราคารวม

- **การจัดการที่นั่งที่ถูกจองไปแล้ว:**  
  - ฟังก์ชัน `disableTakenSeats` ใช้ดึงที่นั่งที่ถูกจองจาก TicketDB แล้วทำการ disable ปุ่มที่นั่งนั้น ๆ

- **การยืนยันการเลือกที่นั่ง:**  
  - เมื่อผู้ใช้คลิกปุ่ม Confirm ระบบจะตรวจสอบว่ามีการเลือกที่นั่งอย่างน้อยหนึ่งที่ จากนั้นเปลี่ยนเส้นทางไปยังหน้าชำระเงิน

## 4. วิธีการใช้งาน
- ผู้ใช้เลือกที่นั่งผ่านการคลิกที่ปุ่มที่นั่งบนหน้าเว็บ  
- ข้อมูลที่นั่งที่เลือกและราคารวมจะแสดงในส่วนสรุป  
- เมื่อกดยืนยันการเลือกที่นั่ง ระบบจะเปลี่ยนเส้นทางไปยังหน้าชำระเงิน

## 5. ข้อสังเกต
- ควรตรวจสอบความถูกต้องของข้อมูลที่ถูกเก็บใน sessionStorage  
- การดึงข้อมูลราคาที่นั่งจาก SeatClassDBต้องมีการจัดการ error ในกรณีที่ไม่สามารถดึงข้อมูลได้  
- การ disable ที่นั่งที่ถูกจองไปแล้วช่วยป้องกันการเลือกที่ซ้ำกัน
**